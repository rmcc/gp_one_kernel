<html><!-- InstanceBegin template="/Templates/helpnav.dwt" codeOutsideHTMLIsLocked="false" -->
<head>
<!-- InstanceBeginEditable name="doctitle" -->

<title>Host Controller Events</title>
<!-- InstanceEndEditable -->
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<!-- InstanceBeginEditable name="head" -->
<!-- InstanceEndEditable -->
<!-- InstanceParam name="HeaderColor" type="color" value="#0000FF" -->
<!-- InstanceParam name="FooterColor" type="color" value="#0000FF" -->
<!-- InstanceParam name="NavBackgroundColor" type="color" value="#FFFFFF" -->
<!-- InstanceParam name="BodyBackgroundColor" type="color" value="#FFFFFF" -->
<link href="CodeTHelp.css" rel="stylesheet" type="text/css">
</head><a name="TopTopic"></a>
<body bgcolor="#FFFFFF" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">
<table width="100%" border="0" cellspacing="0" cellpadding="4">
  <tr> 
    <td width="40%" rowspan="2" bgcolor="#0000FF"><a href="http://www.codetelligence.com"><img src="Images/codetelligence_lrg.gif" name="image" width="252" height="40" border="0"></a></td>
    <td width="60%" height="62" bgcolor="#0000FF">
     <font color="#FFFFFF" size="5" face="Arial, Helvetica, sans-serif"><strong>Embedded SDIO Driver Kit Help </strong></font></td>
  </tr>
</table>

<table width="100%" border="0" cellspacing="10" cellpadding="0">
  <tr>
    <td width="93%"><font face="Arial, Helvetica, sans-serif">
<p class="Topic"><!-- InstanceBeginEditable name="SubTemplate" -->
		Host&nbsp;Driver Events<!-- InstanceEndEditable --> </p>
</font></td>
    <td><!-- InstanceBeginEditable name="NavBack" --><A href="#previous#"><img
			src="Images/leftarrow.gif" width="27" height="32" border="0" alt=""></A>
		<!-- InstanceEndEditable --></td><td><!-- InstanceBeginEditable name="Nav" --><A href="#next#"><img
			src="Images/rightarrow.gif" width="27" height="32" border="0" alt=""></A>
		<!-- InstanceEndEditable --></td>
  </tr>
</table>
<hr>
<table width="100%" border="0" cellspacing="0" cellpadding="15">
<tr><td>
<!-- InstanceBeginEditable name="Help Content" --> <OBJECT
			type="application/x-oleobject"
			classid="clsid:1e2a7bd0-dab9-11d0-b93a-00c04fc99f9e">
			<PARAM name="Keyword" value="Host Controller Events" name="">
		</OBJECT>

		<p class="BODYTEXT">Asynchronous events consist of request completion and slot
		  hardware events (insert/removal and pending slot IRQ) and are usually
		  indicated by interrupt processing
		  code in the HCD. HCDs can indicate asynchronous events to the SDIO
		  core using the <font face="Courier New, Courier, mono"><a href="HD_Reference.htm#FUNC_SDIO_HandleHcdEvent">SDIO_HandleHcdEvent()</a></font> API. HCDs
		  should only indicate SDIO events from deferred processing routines
		  and not from an interrupt handler that can operate
		  in a restricted context. </p>

		<p class="BODYTEXT"><strong>Bus Request Completion:</strong></p>
		<p class="BODYTEXT">The <font face="Courier New, Courier, mono">EVENT_HCD_TRANSFER_DONE</font> event
		  should be indicated when an SD request completes successfully or with
		  a failure status. The indication will start the next request (if any)
		  and process the request that was completed by the HCD. This function
		  may call the
		  HCD's <font face="Courier New, Courier, mono"><a href="HD_Reference.htm#FUNC_Request">pRequest</a></font> callback
		  to start the next request in the same calling context.</p>
		<p class="BODYTEXT"><strong>Card Insertion/Removal:</strong></p>
		<p class="BODYTEXT">HCDs that detect card insertion by a mechanical switch
		  can indicate the arrival (<font face="Courier New, Courier, mono">EVENT_HCD_ATTACH</font>)
		  and removal (<font face="Courier New, Courier, mono">EVENT_HCD_DETACH</font>)
		  of cards. The HCD is not required to power the slot until the SDIO
		  core issues a power configuration request with an initial slot voltage.
		  On card removal, the HCD should stop the current bus request (or let
		  it timeout) and report the event. The SDIO core is responsible for
		  notifying upper software layers of the removal. The HCD is responsible
		  for debouncing the slot and should only indicate this event once for
		  each occurance of insertion or removal.</p>
		<p class="BODYTEXT"><strong>Card Interrupt Pending:</strong></p>
		<p class="BODYTEXT">If the HCD supports SDIO cards, the slot's DAT1 pin is
		  an asynchronous (1-bit or SPI mode) or clock synchronous (4-bit
		  mode) level-sensitive interrupt source . The SDIO core issues a configuration
		  request to enable the slot interrupt detection logic when at least
		  one SDIO function requests
		  interrupt support. An HCD must only enable slot IRQ detection when
		  specifically requested by the SDIO core. When an SDIO slot interrupt
		  is detected, the HCD must mask
		  the interrupt  source on its hardware controller and indicate
		  this event. This event cause the SDIO core
		  and peripheral drivers to process the interrupt using a series of SDIO
		  bus transactions. The HCD must wait until the <font face="Courier New, Courier, mono"><a href="hostc_configuration.htm">SDCONFIG_REARM_INT</a></font> command
		  is issued before unmasking the slot interrupt detection hardware. HCDs
		  should only indicate the <font face="Courier New, Courier, mono">EVENT_HCD_SDIO_IRQ_PENDING</font> event
		  only once for each slot interrupt.</p>
		<p class="BODYTEXT">&nbsp;</p>
		<p class="BODYTEXT">&nbsp;</p>
		<p class="BODYTEXT">&nbsp;</p>

		<!-- InstanceEndEditable -->
&nbsp;<br/></table></td></tr>
<table width="100%" border="0" cellspacing="0" cellpadding="2" >
  <tr> <td><div align="right"><a href="#TopTopic">Back to top</a></div></td></tr>
  <tr bgcolor="#0000FF"> 
    <td> 
      <font color="#FFFFFF"face="Arial, Helvetica, sans-serif"><strong>©2004-2005  </strong></font><font color="#FFFFFF" face="Arial, Helvetica, sans-serif"><strong>Code<em>telligence</em>,
      Inc.   </strong></font><a href="http://www.codetelligence.com" target="_blank"><font color="#FFFFFF" face="Arial, Helvetica, sans-serif">www.codetelligence.com</font></a></td>
  </tr>
</table>
</body>
<!-- InstanceEnd --></html>
